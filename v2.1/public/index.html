<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="theme-color" content="#000000"/>
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json"/>
    <title>React App</title>
    <style>
        html, body {
            margin: 0;
            height: 100vh;
        }
    </style>
</head>
<body>
<noscript>You need to enable JavaScript to run this app.</noscript>
<div id="root"></div>
</body>
<script>
    let appstate = { fnr: '', enhet: null };
    const minimal = () => ({
        appname: 'Modia basic'
    });
    const enhetAware = () => ({
        appname: 'Modia enhet',
        enhet: {
            initialValue: '0604',
            onChange(enhet) {
                console.warn('ENHET onChange', enhet);
            },
            display: 'ENHET_VALG'
        },
        toggles: {
            visEnhetVelger: true
        }
    });
    const fnrAware = () => ({
        appname: 'Modia enhet',
        fnr: {
            initialValue: '10108000398',
            onChange(enhet) {
                console.warn('FNR onChange', enhet);
            },
            display: 'SOKEFELT'
        },
        toggles: {
            visSokefelt: true
        }
    });
    const controlled = (fnrValue, enhetValue) => ({
        appname: 'Modia controlled',
        fnr: {
            value: fnrValue,
            display: 'SOKEFELT',
            onChange(fnr) {
                console.warn("FNR onChange", fnr);
                render(fnr, enhetValue);
            }
        },
        enhet: {
            value: enhetValue,
            display: 'ENHET_VALG',
            onChange(enhet) {
                console.warn("ENHET onChange", enhet);
                render(fnrValue, enhet);
            }
        },
        toggles: {
            visVeileder: true
        },
        markup: {
            etterSokefelt: '<button>Min knapp</button>',
        }
    });
    const complete = () => ({
        appname: 'Modia maximum',
        fnr: {
            initialValue: '',
            display: 'SOKEFELT',
            onChange(fnr) {
                console.warn('FNR onChange', fnr);
            }
        },
        enhet: {
            initialValue: null,
            display: 'ENHET_VALG',
            onChange(enhet) {
                console.warn('ENHET onChange', enhet);
            }
        },
        toggles: {
            visVeileder: true
        },
        markup: {
            etterSokefelt: '<button>Min knapp</button>',
        }
    });

    function renderDecorator(newConfig) {
        appstate = { ...appstate, ...newConfig };
        const config = complete(appstate.fnr, appstate.enhet);
        NAVSPA.internarbeidsflatefs(document.getElementById('root'), config);
    }

    renderDecorator();
</script>
</html>
